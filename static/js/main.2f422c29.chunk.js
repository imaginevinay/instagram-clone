(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},59:function(e,t,a){},64:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var s=a(4),n=a(2),c=a.n(n),o=a(15),i=a.n(o),r=(a(52),a(10)),l=(a(53),a(54),a(91)),m=a(92),d=a(87),p=a(90),u=a(21),j=u.a.initializeApp({apiKey:"AIzaSyCDB0ULlw9XChy-QkNQdORZp8_WzFloDq4",authDomain:"instagram-clone-react-5b90b.firebaseapp.com",databaseURL:"https://instagram-clone-react-5b90b.firebaseio.com",projectId:"instagram-clone-react-5b90b",storageBucket:"instagram-clone-react-5b90b.appspot.com",messagingSenderId:"496672111910",appId:"1:496672111910:web:233ca74fa58481dbfbd5e7",measurementId:"G-D8X359FMEW"}).firestore(),b=u.a.auth(),g=u.a.storage();a(59);function h(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var O=Object(d.a)((function(e){return{paper:{display:"flex",flexDirection:"column",position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},root:{width:"100%"},chooseFile_button:{backgroundColor:"#0095f6"}}}));var f=function(e){var t=e.username,a=Object(n.useState)(""),c=Object(r.a)(a,2),o=c[0],i=c[1],d=Object(n.useState)(0),b=Object(r.a)(d,2),f=b[0],x=b[1],v=Object(n.useState)(null),N=Object(r.a)(v,2),_=N[0],y=N[1],S=O(),C=Object(n.useState)(h),w=Object(r.a)(C,1)[0],k=Object(n.useState)(!1),U=Object(r.a)(k,2),I=U[0],F=U[1],D=function(){F(!1)};return Object(s.jsxs)("div",{className:"image_upload",children:[Object(s.jsx)(l.a,{variant:"contained",size:"small",color:"primary",className:S.chooseFile_button,onClick:function(){F(!0)},children:"Add a new post"}),Object(s.jsx)(p.a,{open:I,onClose:D,children:Object(s.jsxs)("div",{style:w,className:S.paper,children:[Object(s.jsx)("center",{children:Object(s.jsx)("img",{src:"https://instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"",className:"app_header_img"})}),Object(s.jsx)(m.a,{className:"caption",type:"text",placeholder:"Enter a caption...",onChange:function(e){return i(e.target.value)},value:o}),Object(s.jsxs)("div",{className:"file_upload",children:[Object(s.jsx)(m.a,{classes:{root:S.root},type:"file",onChange:function(e){e.target.files[0]&&y(e.target.files[0])}}),Object(s.jsx)("progress",{className:"progress_bar",value:f,max:"100"})]}),Object(s.jsx)("div",{className:"upload_button",children:Object(s.jsx)(l.a,{variant:"contained",size:"small",color:"primary",className:S.chooseFile_button,onClick:function(){g.ref("images/".concat(_.name)).put(_).on("state_changed",(function(e){var t=100*Math.round(e.bytesTransferred/e.totalBytes);x(t)}),(function(e){console.log(e),alert(e.message)}),(function(){g.ref("images").child(_.name).getDownloadURL().then((function(e){j.collection("posts").add({caption:o,timestamp:u.a.firestore.FieldValue.serverTimestamp(),imageUrl:e,userName:t}),x(0),i(""),y(null),D()}))}))},children:"Upload"})})]})})]})};var x=function(e){var t=e.auth,a=e.user,n=e.signIn,c=e.signUp;return Object(s.jsxs)("div",{className:"nav",children:[Object(s.jsx)("img",{className:"logo",src:"https://instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""}),(null===a||void 0===a?void 0:a.displayName)?Object(s.jsx)(f,{username:a.displayName}):Object(s.jsx)("p",{className:"loginText",children:"You need to login to upload posts."}),a?Object(s.jsx)(l.a,{onClick:function(){return t.signOut()},children:"Logout"}):Object(s.jsxs)("div",{className:"app_loginContainer",children:[Object(s.jsx)(l.a,{onClick:function(){return n(!0)},children:"Sign In"}),Object(s.jsx)(l.a,{onClick:function(){return c(!0)},children:"Sign Up"})]})]})},v=(a(64),a(93)),N=a(35),_=a.n(N),y=a(43),S=a.n(y)()({prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"%d sec",minute:"1 m",minutes:"%d m",hour:"1 h",hours:"%d h",day:"1 d",days:"%d d",month:"1 mo",months:"%d mos",year:"1 y",years:"%d ys",wordSeparator:" "});var C=function(e){var t=e.user,a=e.postId,c=e.userName,o=e.caption,i=e.imageUrl,l=e.timeStamp,m=Object(n.useState)([]),d=Object(r.a)(m,2),p=d[0],b=d[1],g=Object(n.useState)(""),h=Object(r.a)(g,2),O=h[0],f=h[1];return Object(n.useEffect)((function(){var e;return a&&(e=j.collection("posts").doc(a).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){b(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[a]),Object(s.jsxs)("div",{className:"post",children:[Object(s.jsxs)("div",{className:"post_header",children:[Object(s.jsxs)("div",{className:"header_text",children:[Object(s.jsx)(v.a,{className:"post_avatar",alt:c,src:"/static/images/avatar/1.jpg"}),Object(s.jsx)("h3",{className:"heading",children:c})]}),Object(s.jsx)("div",{children:l?Object(s.jsx)("span",{className:"time_stamp postTimeStamp",children:Object(s.jsx)(_.a,{date:l.toDate(),formatter:S,minPeriod:60,maxPeriod:60})}):Object(s.jsx)("span",{})})]}),Object(s.jsx)("img",{className:"post_image",alt:"",src:i}),Object(s.jsxs)("h4",{className:"post_caption",children:[Object(s.jsxs)("strong",{children:[c," :"]})," ",o]}),Object(s.jsx)("div",{className:"commentSection",children:p.map((function(e){return Object(s.jsxs)("div",{className:"commentBoxMain",children:[Object(s.jsx)("div",{className:"commentBox_avatar",children:Object(s.jsx)(v.a,{className:"post_avatar",alt:e.userName,src:"/static/images/avatar/1.jpg"})}),Object(s.jsxs)("div",{className:"commentTextSection",children:[Object(s.jsxs)("div",{className:"commentContainer",children:[Object(s.jsx)("strong",{children:e.userName}),Object(s.jsx)("p",{className:"user_comment",children:e.text})]}),(null===e||void 0===e?void 0:e.timestamp)?Object(s.jsx)("span",{className:"time_stamp",children:Object(s.jsx)(_.a,{date:e.timestamp.toDate(),formatter:S,minPeriod:60,maxPeriod:60})}):Object(s.jsx)("span",{})]})]})}))}),(null===t||void 0===t?void 0:t.displayName)?Object(s.jsxs)("form",{className:"comments_box",children:[Object(s.jsx)("input",{className:"post_comments",type:"text",placeholder:"Add comments ...",value:O,onChange:function(e){f(e.target.value)}}),Object(s.jsx)("button",{className:"post_button",type:"submit",onClick:function(e){e.preventDefault(),j.collection("posts").doc(a).collection("comments").add({text:O,userName:t.displayName,timestamp:u.a.firestore.FieldValue.serverTimestamp()}),f("")},disabled:!O,children:"Post"})]}):Object(s.jsx)("span",{})]})},w=Object(d.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},margin:{backgroundColor:"#0095f6",margin:"10px auto",width:"50%",textAlign:"center"}}}));function k(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var U=function(){var e=w(),t=Object(n.useState)([]),a=Object(r.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(k),d=Object(r.a)(i,1)[0],u=Object(n.useState)(""),g=Object(r.a)(u,2),h=g[0],O=g[1],f=Object(n.useState)(""),v=Object(r.a)(f,2),N=v[0],_=v[1],y=Object(n.useState)(""),S=Object(r.a)(y,2),U=S[0],I=S[1],F=Object(n.useState)(null),D=Object(r.a)(F,2),P=D[0],A=D[1],E=Object(n.useState)(!1),B=Object(r.a)(E,2),T=B[0],z=B[1],L=Object(n.useState)(!1),M=Object(r.a)(L,2),W=M[0],R=M[1];return Object(n.useEffect)((function(){var e=b.onAuthStateChanged((function(t){return A(t||null),function(){e()}}))}),[P,N]),Object(n.useEffect)((function(){j.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){o(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(s.jsxs)("div",{className:"app",children:[Object(s.jsx)(p.a,{open:T,onClose:function(){z(!1)},children:Object(s.jsxs)("div",{style:d,className:e.paper,children:[Object(s.jsx)("center",{children:Object(s.jsx)("img",{src:"https://instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"",className:"app_header_img"})}),Object(s.jsxs)("form",{className:"app_signUp",children:[Object(s.jsx)(m.a,{placeholder:"Username",type:"text",value:N,onChange:function(e){return _(e.target.value)}}),Object(s.jsx)(m.a,{placeholder:"Email",type:"text",value:h,onChange:function(e){return O(e.target.value)}}),Object(s.jsx)(m.a,{placeholder:"Password",type:"password",value:U,onChange:function(e){return I(e.target.value)}}),Object(s.jsx)(l.a,{variant:"contained",size:"small",color:"primary",className:e.margin,type:"submit",onClick:function(e){e.preventDefault(),b.createUserWithEmailAndPassword(h,U).then((function(e){var t=e.user.updateProfile({displayName:N});return console.log("updated user",t),window.location.reload(!1),t})).catch((function(e){return alert(e.message)})),z(!1)},children:"Sign Up"})]})]})}),Object(s.jsx)(p.a,{open:W,onClose:function(){R(!1)},children:Object(s.jsxs)("div",{style:d,className:e.paper,children:[Object(s.jsx)("center",{children:Object(s.jsx)("img",{src:"https://instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"",className:"app_header_img"})}),Object(s.jsxs)("form",{className:"app_signUp",children:[Object(s.jsx)(m.a,{placeholder:"Email",type:"text",value:h,onChange:function(e){return O(e.target.value)}}),Object(s.jsx)(m.a,{placeholder:"Password",type:"password",value:U,onChange:function(e){return I(e.target.value)}}),Object(s.jsx)(l.a,{variant:"contained",size:"small",color:"primary",className:e.margin,type:"submit",onClick:function(e){e.preventDefault(),b.signInWithEmailAndPassword(h,U).catch((function(e){return alert(e.message)})),R(!1)},children:"Sign In"})]})]})}),Object(s.jsx)(x,{auth:b,user:P,signIn:R,signUp:z}),Object(s.jsx)("div",{className:"app_posts",children:Object(s.jsx)("div",{className:"app_posts_left",children:c.map((function(e){var t=e.id,a=e.post;return Object(s.jsx)(C,{user:P,postId:t,imageUrl:a.imageUrl,userName:a.userName,caption:a.caption,timeStamp:a.timestamp},t)}))})})]})},I=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,95)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),s(e),n(e),c(e),o(e)}))};i.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(U,{})}),document.getElementById("root")),I()}},[[67,1,2]]]);
//# sourceMappingURL=main.2f422c29.chunk.js.map